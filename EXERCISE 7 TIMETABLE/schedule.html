<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="clock-con.png">
    <title>TIMETABLE</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
</head>

<body>
<div class="container">
  <div class="sidebar">
    <h1>timetable</h1>
    <ul>
        <li><a href="in.html">Home</a></li>
        <li><a href="schedule.html">Schedule</a></li>
        <li><a href="profile.html">Profile</a></li>
        <li><a href="about.html">About</a></li>
    </ul>
  </div>

  <div class="calendar-container">
    <div class="calendar-header">
        <div class="month-nav">
            <button class="nav-arrow" onclick="changeMonth(-1)">&lt;</button>
            <h2 id="month-title"></h2>
            <button class="nav-arrow" onclick="changeMonth(1)">&gt;</button>
          </div>          
    </div>

    <div class="weekdays">
        <div>Mon</div>
        <div>Tue</div>
        <div>Wed</div>
        <div>Thu</div>
        <div>Fri</div>
        <div>Sat</div>
        <div>Sun</div>
      </div>      

    <div class="calendar-grid" id="calendar-grid">
    </div>
  </div>

  <script>
    const calendarGrid = document.getElementById('calendar-grid');
    const monthTitle = document.getElementById('month-title');
  
    const months = ["January", "February", "March", "April", "May", "June", 
                    "July", "August", "September", "October", "November", "December"];
  
    const today = new Date();
    let currentMonth = today.getMonth();
    let currentYear = today.getFullYear();
  
    let tasks = JSON.parse(localStorage.getItem("tasks")) || {};
  
    function saveTasks() {
      localStorage.setItem("tasks", JSON.stringify(tasks));
    }
  
    function renderCalendar() {
      calendarGrid.innerHTML = '';
      monthTitle.textContent = `${months[currentMonth]} ${currentYear}`;
  
      const firstDay = new Date(currentYear, currentMonth, 1);
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  
      let startWeekDay = firstDay.getDay(); // 0 = sun, 1 = mon, etc eme.
      startWeekDay = (startWeekDay + 6) % 7; // adjust so mon = 0
  
      // add blank cells before 1st day
      for (let i = 0; i < startWeekDay; i++) {
        const empty = document.createElement('div');
        empty.className = 'day empty';
        calendarGrid.appendChild(empty);
      }
  
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(currentYear, currentMonth, day);
        const key = `${currentYear}-${currentMonth}-${day}`;
  
        const dayElement = document.createElement('div');
        dayElement.className = 'day';
  
        // highlighterrr ;)
        if (
          day === today.getDate() &&
          currentMonth === today.getMonth() &&
          currentYear === today.getFullYear()
        ) {
          dayElement.classList.add("today");
        }
  
        const link = document.createElement('a');
        link.href = `day.html?date=${currentYear}-${currentMonth + 1}-${day}`;
        link.innerHTML = `<div class="day-number">${day}</div>`;
  
        if (tasks[key]) {
          tasks[key].forEach(task => {
            link.innerHTML += `<div class="task">${task}</div>`;
          });
        }
  
        dayElement.appendChild(link);
        calendarGrid.appendChild(dayElement);
      }
    }
  
    function changeMonth(offset) {
      currentMonth += offset;
      if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      } else if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      renderCalendar();
    }
  
    renderCalendar();
  </script>
  
  
</body>
</html>
